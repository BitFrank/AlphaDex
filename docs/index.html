<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>AlphaDex - DEX - $DEX Kitten.finance (KIF) Kitten Finance KittenFinance $KIF DeFi Token</title>
    <meta id="viewport" name="viewport" content="width=1500">
    <link rel="stylesheet" href="index.css">
    <style>
        body {
            background-color: #f7f7f7;
        }

        .panel {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 8px;
            margin-bottom: 1em;
            padding: 1em;
            line-height: 1.5;
        }

        .input {
            background-color: white;
        }

        .navbar_wrap {
            background: #5A0;
        }

        .button {
            background-color: #492;
        }

        .button:hover {
            background: #0C0;
        }

        #sidebar {
            flex: 0 1 30%;
            background: #eee;
        }

        .mybox {
            display: inline-block;
        }

        .mybox > div {
            display: inline-block;
            margin-right: 0.5em;
        }

        .button {
            height: 34px;
        }

        .input,
        .input_wrap {
            height: 34px;
        }

        #btn_help {
            cursor: pointer;
            user-select: none;
        }

        #btn_help:hover {
            color: red;
        }

        #table_trade .button {
            margin: 2px 0;
        }

        #all_round .button {
            margin: 8px 0;
        }

        input[type='radio'] {
            transform: scale(2);
        }

        .unselectable {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .chart_wrap {
            position: relative;
        }
        .chart_legend {
            position: absolute;
            left: 15px;
            top: 10px;
            z-index: 10;
        }

        .xx_winner {
            cursor: pointer;
        }

        .rounds_level_one {
            margin-top: 0.35em;
            border: 1px solid #ddd;
            /* background: #fff; */
            border-radius: 6px;
            padding: 0.2em 0.5em;
        }

        .right_line {
            border-right: 1px solid #ddd;
        }

        .rounds_level_one div {
            /* font-size: 110%; */
            color: #777;
            line-height: 1.5;
            text-align: center;
            /* border: 1px solid black; */
        }

        .rounds_level_one span {
            font-size: 120% !important;
            font-weight: normal !important;
            color: #000;
        }

        .all_round_head {
            font-size: 130%;
            font-weight: bold;
            color: #333;
        }

        .green {
            color: green !important;
        }

        .darkred {
            color: darkred !important;
        }

        #help {
            line-height: 2;
            display: none;
            font-size: 110%;
            width: 1200px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
            margin-top: 1em;
            box-sizing: border-box;
        }

        #simple_ui {
            font-size: 110%;
            width: 1700px;
            max-width: 90%;
            margin-left: auto;
            margin-right: auto;
            margin-top: 1em;
            box-sizing: border-box;
        }

        /* .xy_winner {
            display: inline-block;
        } */

        .navbar a {
            text-decoration: none;
        }

        .bg_green {
            background-color: #0a0;
        }

        .bg_darkred {
            background-color: #a22;
        }

        #simple_stake_bull,
        #simple_stake_bear {
            height: 100px;
            font-size: 135%;
        }

        #simple_stake_bull:hover {
            background-color: #0e0;
        }

        #simple_stake_bear:hover {
            background-color: #e00;
        }

        #simple_stake_amt {
            font-size: 250%;
            padding: 0.5em;
        }

        .buy_weth_txt {
            display: none;
        }
    </style>
    <style id="dark_mode_css">
        body {
            background-color: #222;
            color: #ddd;
        }

        #main {
            border-right: 1px solid transparent;
        }

        #help {
            background-color: #222;
            color: #ddd;
        }

        .panel {
            background-color: #111;
            color: #ddd;
            border-color: #333;
        }

        a:link,
        a:visited {
            color: #ddd;
        }

        .all_round_head {
            color: #aaa;
        }

        .rounds_level_one {
            border: 1px solid #333;
        }

        .right_line {
            border-right: 1px solid #333;
        }

        .rounds_level_one span {
            color: #ddd;
        }

        #sidebar {
            background-color: #1a1a1a;
            color: #ccc;
        }

        .emphasize {
            font-weight: bold;
            color: white;
        }

        .button {
            box-shadow: none;
            background-color: #040;
        }

        .button:hover {
            background: #090;
        }

        .navbar_wrap {
            background-color: #040;
            color: #ddd;
        }

        .input {
            background: black;
            box-shadow: none;
            border: 1px solid #333;
            color: #ddd;
        }

        table,
        th,
        td {
            border: 1px solid #444;
        }

        .green {
            color: #0a0 !important;
        }

        .darkred {
            color: #c22 !important;
        }

        .bg_green {
            background-color: #070;
        }

        .bg_darkred {
            background-color: #700;
        }
    </style>
    <script>
        // document.getElementById('dark_mode_css').disabled = true;
    </script>
</head>

<body>
    <div id="wrap">
        <div id="header" class="navbar_wrap">
            <div class="navbar">
                <p style="font-size: 30px;"><b>Alpha</b>Dex - Œ±</p>
                <p id="btn_help">Help & FAQ (click again to hide)</p>
                <p>
                    <a href="javascript:void(0);" onclick="color_theme_switch()">Dark / Light Mode</a>
                </p>
                <p><a href="https://www.alphadex.org/core_eth/" target="_blank">Switch to CORE-ETH</a></p>
                <p>a <a href="https://www.kitten.finance" target="_blank" style="text-decoration: underline;">kitten.finance</a> product</p>
            </div>
        </div>
        <div id="help" class="panel">
            AlphaDex¬†is a decentralized derivative market and liquidity aggregator. You are looking at its first function, which is similar to a binary option market settled by smart contracts.<br><br>
            The usage of AlphaDex is simple:
            <ul type="round" style="font-weight: bold;">
                <li>Stake near the end of a round.</li>
                <li>At that moment, be a üêÇBULL if you think the price will go up in the next 2 rounds.</li>
                <li>At that moment, be a üêªBEAR if you think the price will go down in the next 2 rounds.</li>
                <li>Stake the amount you are willing to risk. There is no need to consider the amount of stakes on both sides.</li>
            </ul>
            There are more details in AlphaDex, including "TWAP" and "x+2 vs x+1" stuffs. They are to make sure the process is fair and prevent hackers. You can safely ignore them.
            <br>But if you are interested in the details, then this explanation is for you.<br><br>
            <div class="flexbox">
                <div style="width: 49%">
                    <b>On Staking:</b>
                    <ul type="round">
                        <li>If you stake in round x, you are speculating on the TWAP of round x+2 vs the TWAP of round x+1. (TWAP means time-weighted average price).</li>
                        <li>The delay is to prevent price manipulations and flash loan attacks.</li>
                        <li>If you stake in round x, you can call [Payoff] after round x+2 ends (that is, after round x+3 begins). There'll be <b>[Payoff] buttons in the table</b> besides your stakes.</li>
                    </ul>
                </div>
                <div style="width: 49%">
                    <br>For example, assume current round is 09:20 ~ 09:30. In this round, you put your stakes on the difference of:
                    <br>1. the TWAP between [the last trade before 09:30] and [the last trade before 09:40].
                    <br>2. the TWAP between [the last trade before 09:40] and [the last trade before 09:50].
                    <br>If you think 2 > 1, you are üêÇbullish. If you think 1 > 2, you are üêªbearish. If 1 = 2, then everyone gets their stakes back.
                </div>
            </div><br>
            <div style="margin: 0 auto; text-align: center;">
                From the chart, we can see this is similar to [price at 9:50] compared with [price at 9:30]. Please read <a href="https://medium.com/@kitten.finance/alphadex-explained-in-images-fe269837b3e1" target="_blank">this essay</a> and <a href="https://medium.com/@kitten.finance/alphadex-explained-in-images-part-2-bed309b6ca0a" target="_blank">this essay</a> to understand why.<br><br>
                <img src="alphadex_desc.png" style="max-width: 100%;">
            </div>
            <br><b>On Payoff:</b> AlphaDex introduces the concept of <b>paired stakes</b>, to limit the risk exposure when there is bull-bear imbalance in stakes.
            <br>For example:
            <ul type="round">
                <li>If there are 100 üêÇbullish stakes and 10 üêªbearish stakes, then the amount of paired stakes is 10. So the bulls are only risking 10 stakes.</li>
                <li>In this case, if üêÇbulls win, üêÇbulls receive 1.1 stakes per stake (note 100 * 1.1 = 110 = 100 + 10).</li>
                <li>In this case, if üêÇbears win, üêÇbulls can still receive 0.9 stake per stake, while üêªbears receive 2 stakes per stake (note 100 * 0.9 + 10 * 2 = 110 = 100 + 10).</li>
                <li>Hence one can feel free to put lots of stakes near the end of a round, without worrying about them taken by tiny stakes on the opposite side.</li>
            </ul>
            <b>On Sync:</b>
            <ul type="round">
                <li>The contract stores uniswap TWAP only when [Sync contract] is called. <b>This only need to happen once at the end of each round.</b></li>
                <li>If you are winning, you'd like to call [Sync contract] to fix the price.</li>
                <!-- <li>The start time of next round might be delayed by a few minutes, because of the time required to [Sync] contract with market.</li>
                <li>There shall be at least 1 trade in each round. Or you cannot [Sync] because there is no change in price.</li> -->
                <li><b>In the future KittenSwap there's no need to manually sync.</b> There are many more functions in AlphaDex, and KittenSwap will provide the best supports for them.</li>
            </ul>
            <div class="vault_only">
                <b>On Contract Safety:</b>
                <ul type="round">
                    <li>There are two methods to stake in AlphaDex: (1) MetaMask ==[Stake]=> AlphaDex ==[Payoff]=> MetaMask. (2) Vault ==[Stake]=> AlphaDex ==[Payoff]=> Vault.</li>
                    <li>The stake-from-vault method saves gas, because the staked tokens stay in the contract (vault) until you withdraw them, however it will also be more risky if the contract has bug (very unlikely, but still possible).</li>
                    <li>The stake-from-metamask method is safe. Even if the contract has bug, the most you can lose are your stakes in a round.</li>
                </ul>
            </div>
        </div>
        <div id="simple_ui" style="margin-bottom: 6em;">
            <div style="text-align: center; font-size: 180%; margin: 2em 0; letter-spacing: 0.2em;">
                Stake <span class="span_stake_token">(loading...)</span> to be bullish / bearish on <span class="span_market_desc">(loading...)</span>
                <div style="color: #777; font-size: 60%; margin-top: 1em; letter-spacing: 0.1em;">a binary option market settled by smart contracts</div>
            </div>
            <div class="flexbox">
                <div class="chart_wrap" style="margin-top: -0.5em; flex:1">
                    <div class="chart_legend" id="simple_chart_legend"></div>
                    <div id="simple_chart"></div>
                </div>
                <div style="flex:0.3; margin-left: 2em">
                    <button class="button bg_green" id="simple_stake_bull">‚¨ÜÔ∏è I am üêÇBullish</button><br><br>
                    <div class="input_wrap"><div style="margin-right: 1em;">Stake<br><span class="span_stake_token">?</span>&nbsp;:</div><input placeholder="amount" class="input stake_amt" style="width: 100%" id="simple_stake_amt"></div><br><br>
                    <button class="button bg_darkred" id="simple_stake_bear">‚¨áÔ∏è I am üêªBearish</button>
                </div>
            </div><br><br>
            <div>
                You have <span class="wallet_amt">?</span> <span class="span_stake_token">?</span> in MetaMask.<span class="buy_weth_txt">&nbsp;&nbsp;&nbsp; <a href="https://app.uniswap.org/#/swap?inputCurrency=ETH" target="_blank">Get WETH on uniswap.</a></span>&nbsp;&nbsp;&nbsp; You win if you correctly predict the general direction of <span class="span_market_desc">?</span> in the next <span class="two_rounds_length">(loading...)</span>.
            </div>
            <!-- <br><div>
                Hint:
            </div> -->
            <br><br>
            <div id="log2"></div>
        </div>
        <div style="border-top: 1px solid #777; border-bottom: 1px solid #777; margin-bottom: 8em;">
            <div class="flexbox" style="padding: 0.5em 30%; font-size: 125%">
                <div>&uarr; Simple UI</div>
                <div>&darr; Advanced UI & Collect payoffs</div>
            </div>
        </div>
        <div id="main-wrap" style="min-height: 88vh;">
            <div id="main">
                <div class="panel">
                    <div class="flexbox">
                        <div>You are speculating on <b class="green"><span class="span_market_desc">?</span></b></div>
                        <div style="display: none;"><select class="input_market" size="1" style="width: 200px"></select></div>
                        <!-- <div><button class="button" style="flex:1" id="trade_uniswap">Trade on uniswap</button></div> -->
                        <div>Current price: <span class="price_now">?</span></div>
                        <div><button class="button" style="flex:1" id="sync_market">Sync contract & start a new round</button></div>
                    </div>
                    <div class="chart_wrap" style="margin-top: 0.9em">
                        <div class="chart_legend" id="div_chart_legend"></div>
                        <div id="div_chart"></div>
                    </div>
                </div>
                <div class="panel" id="all_round">
                    <div style="margin-bottom: 0.5em;" class="flexbox all_round_head">
                        <span>üü¢ Current round</span>
                        <span style="font-size: 80%; font-weight: normal; color: #777"><span id="next_round_time"></span></span>
                        <span style="font-size: 80%; font-weight: normal; color: #777">One round = <span id="market_epoch_period">?</span></span>
                        <span class="div_read_more_epochs" style="min-height: 50px;">
                            <button class="button read_more_epochs">Loading...</button>
                        </span>
                    </div>
                    <div id="div_round_latest">
                        <div class="flexbox rounds_level_one" style="align-items: stretch;">
                            <div style="width: 6%;">Round<br><span class="X_round">?</span></div>
                            <div style="width: 13%;">Start time<br><span class="X_time">?</span></div>
                            <div style="width: 17%;">TWAP<br><span class="X_twap">?</span></div>
                            <div class="right_line" style="height: stretch; margin-top: -0.2em; margin-bottom: -0.2em;">&nbsp;</div>
                            <div style="width: 18%;" class="xx_winner">Winner<br><span class="X_winner">?</span></div>
                            <div class="right_line" style="height: stretch; margin-top: -0.2em; margin-bottom: -0.2em;">&nbsp;</div>
                            <div style="width: 20%;" class="green">üêÇBullish stakes<br><span class="X_bullstake green"> ?</span></div>
                            <div style="width: 20%;" class="darkred">üêªBearish stakes<br><span class="X_bearstake darkred">?</span></div>
                        </div>
                    </div>
                    <div style="margin-top: 1em; color: #777">Feel free to stake even if you see 0 stake. There will always be stakes when the round is near its end (as many traders will wait till then).</div>
                    <div style="margin-top: 1.3em; margin-bottom: 1.1em;" class="flexbox all_round_head">
                        <span>üîµ Previous rounds</span>
                    </div>
                    <div id="div_rounds_old">
                    </div>
                    <br>
                    <div class="mybox" style="width: 100%">
                        <div class="div_read_more_epochs">
                            <button class="button read_more_epochs" style="flex:1">Loading...</button>
                        </div>
                        <div>
                            Commission = <span id="fee_percent">?</span> % (only charged on profits).
                        </div>
                    </div>
                </div>
                <div class="panel" style="display: none;">
                    <table id="table_trade" style="width: 100%">
                        <thead style="font-weight: bold;">
                            <tr>
                                <td>Round</td>
                                <td>Start time</td>
                                <!-- <td>tUniswap</td> -->
                                <td>TWAP (time-weighted average price)</td>
                                <!-- <td>stakeToken</td> -->
                                <td>Bullish stakes</td>
                                <td>Bearish stakes</td>
                                <td>Winner</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>?</td>
                                <td>?</td>
                                <!-- <td>?</td> -->
                                <td>?</td>
                                <!-- <td>?</td> -->
                                <td>reading... (takes 10 ~ 60 seconds)</td>
                                <td>reading...</td>
                                <td>?</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="panel">
                    AlphaDex¬†is a decentralized derivative market and liquidity aggregator. You are looking at its first function, similar to a binary option market settled by smart contracts.
                    <br><br>There are always 3 rounds in a day: UTC 0:00~8:00, 8:00~16:00, 16:00~0:00. If [Sync] is not called at the desired start time, then the start time is delayed, however it won't affect the start time of next round.
                    <br><br>For example, if [Sync] is called at UTC 1:15, then this round is UTC 1:15~8:00, and next round is still UTC 8:00~16:00.
                </div>
            </div>
            <div id="sidebar" style="display: flex; flex-direction: column;">
                <div class="mybox panel">
                    Are you bullish or bearish on <span class="span_market_desc">market</span>? Stake to speculate.
                    <!-- <div><span>Speculate on <b>TWAP of round <span class="cur_epoch_add_2">?</span> vs round <span class="cur_epoch_add_1">?</span></b> :</span></div> -->
                    <div class="vault_only">
                        <div style="margin-top:1.3em">
                            <input type="radio" name="stake_use_vault" value="0" checked>&nbsp;&nbsp;Stake from MetaMask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input type="radio" name="stake_use_vault" value="1">&nbsp;&nbsp;Stake from Vault
                        </div>
                    </div>
                    <div style="margin-top:1.3em">
                        <input type="radio" name="stake_opinion" value="1" checked>&nbsp;&nbsp;<span class="green">I am üêÇBullish</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="stake_opinion" value="0">&nbsp;&nbsp;<span class="darkred">I am üêªBearish</span>
                    </div>
                    <br>
                    <div class="input_wrap" style="margin-top:1.3em"><input placeholder="amount" class="input stake_amt" style="width: 120px"></div>
                    <div><button class="button" id="add_stake">Stake&nbsp;<span class="span_stake_token">?</span></button></div>
                    <div style="margin-top:1em">You have <span class="wallet_amt">?</span> <span class="span_stake_token">?</span> in MetaMask<span class="vault_only">, <span class="vault_amt">?</span> <span class="span_stake_token">?</span> in Vault</span>.</div>
                    <div style="margin-top:1em; color: #777">Stake the amount you'd like to risk. There is no need to consider the amount of stakes on both sides.</div>
                </div>
                <div class="vault_only"><div class="mybox panel">
                    <div><span>Deposit <span id="stake_token_name">?</span> in Vault first, to save gas when staking: </span></div>
                    <div style="margin-top:1em" class="input_wrap"><input placeholder="amount" class="input input_vault_amt" style="width: 120px"></div>
                    <div><button class="button" style="flex:1" id="vault_deposit">Vault deposit</button></div>
                    <div><button class="button" style="flex:1" id="vault_withdraw">Vault withdraw</button></div>
                    <div style="margin-top:1em; color: #777"><div class="buy_weth_txt">Swap between ETH and WETH on <a style="color: #777" href="https://www.kitten.finance" target="_blank">Kitten.Finance</a> frontpage.</div></div>
                </div></div>
                <div class="mybox panel">
                    <div><span id="market_log_pre"></span><span id="market_log">initializing...</span><span id="market_log_time"></span></div>
                </div>
                <div id="log"></div>
                <div style="background-color: #1a1a1a;">
                    <div id="tlkio" data-channel="AlphaDex-trollbox" data-theme="theme--night" data-nickname="anonymous" style="width:100%;height:600px;"></div>
                </div>
            </div>
        </div>
        <div id="footer">
            <div style="margin: 0 auto; text-align: center;" id="help_imgs">
                <br><br><br><a style="margin-right: 3em; cursor: pointer;" id="help_imgs_prev" class="unselectable">[prev slide]</a><b>Click the image for a slideshow on AlphaDex:</b><a style="margin-left: 3em; cursor: pointer;" id="help_imgs_next" class="unselectable">[next slide]</a>
                <br><br><img src="help/1.png" class="unselectable" style="max-width: 100%; cursor: pointer;" id="help_imgs_img"><br><br><br><br>
            </div>
            <div style="margin: 0 auto; text-align: center;">
                <span id="contract_addr"></span> &nbsp;
                <a href="https://medium.com/@kitten.finance/alphadex-explained-in-images-fe269837b3e1" target="_blank">[Medium essay]</a> &nbsp;
                <a href="https://medium.com/@kitten.finance/alphadex-explained-in-images-part-2-bed309b6ca0a" target="_blank">[Medium essay - part 2]</a> &nbsp;
                <a href="AlphaSwap-Draft.pdf" target="_blank">[AlphaDex tech report draft]</a> &nbsp;
                <a href="https://www.kitten.finance" target="_blank">[Kitten.Finance]</a>
            </div>
            <br><br><br>
            <div class="navbar_wrap">
                <div class="navbar no_underline bottom_bar">
                    <a href="https://discord.gg/pMaZswC" target="_blank">Discord (we have a great community üê±)</a> <a href="https://t.me/kitten_finance_group" target="_blank">Telegram</a> <a href="https://twitter.com/KittenFinance" target="_blank">Twitter</a>
                    <a href="https://kitten-finance.medium.com/" target="_blank">Medium</a>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="js/ethers-5.0.umd.min.js"></script>
    <script type="text/javascript" src="js/helper.js"></script>
    <script type="text/javascript" src="js/contract.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script>
        var clicky_site_ids = clicky_site_ids || [];
        clicky_site_ids.push(101285073);
    </script>
    <script async src="//static.getclicky.com/js"></script>
    <script type="text/javascript" src="js/lightweight-charts.standalone.production.js"></script>
    <script async src="https://tlk.io/embed.js" type="text/javascript"></script>
</body>

</html>
